/* **********************************************************************************
 *  File Name      : common.min.js
 *  Description    : KaKaoPay DLP 창 관련 공통 모듈 Ver 1.2
 *  Author         : 정명환 bkmatrix0@lgcns.com
 *  Date Created   : 2014.10.02
 ***********************************************************************************/

(function(c){var a=function(j,g){var k=location.host,i=k.replace(/[\-.:]/g,"")+"kakaopayLibrary_LOG",f,h,m;if(/MSIE 6.0|MSIE 7.0|MSIE 8.0|MSIE 9.0/i.test(navigator.userAgent)&&g){try{f=c.open("",i,"width=1000,height=400,status=0,navigation=0,scrollbars=1")}catch(l){}if(f){m=f.document;h=m.getElementById("log");if(!h){m.write("<html><head><title>kakaopayLibrary log "+k+"</title></head>");m.write('<body><div id="log"></div></body></html>');m.close();h=m.getElementById("log")}}}return function(q){var o=new Date();var n="["+j+"] ["+location.host+"] TIME : ["+o.getHours()+":"+o.getMinutes()+":"+o.getSeconds()+":"+o.getMilliseconds()+"] = ";if(g){if(/MSIE 6.0|MSIE 7.0|MSIE 8.0|MSIE 9.0/i.test(navigator.userAgent)){try{h.appendChild(m.createElement("div")).appendChild(m.createTextNode(n+q));h.scrollTop=h.scrollHeight}catch(p){}}else{console[j](n+q)}}}};var b=function(){var f=c.kakaopayDlpServerConfig._privateDlpServer;var e=c.kakaopayDlpServerConfig._publicDlpServer;c.kakaopayDlpServerConfig=null;f.transport="";e.kdebug=a.apply(a,f.debugMode);f.getLayerSizeInfo=function(g){e.kdebug("[Remote Method : getLayerSizeInfo() Call]  : [param] : "+g);return f.layerSizeInfo[g]};f.getTransport=function(){e.kdebug("[Remote Method : getTransport() Call]  : [param] : ");return this.transport};f.setLayerCenterPosition=function(p,i,u){e.kdebug("[Remote Method : setLayerCenterPosition() Call]  : [param] : "+p+" : "+i);var m=this.getLayerSizeInfo(i);var r=$("#"+u,p);var k=$(c);var q=$(document);var l=k.width();var h=k.height();var g=m.width;var t=m.height;var o=q.scrollLeft();var j=q.scrollTop();var n=l/2-g/2+o;var s=h/2-t/2+j;r.css({left:n,top:s,width:g,height:t})};e.getMessage=function(g){this.kdebug("[Remote Method : getMessage() Call]  : [param] : "+g);return f.message[g]};e.setTransport=function(g){this.kdebug("[Remote Method : setTransport() Call]  : [param] : "+g);f.transport=g};e.sendMessage=function(h,g){this.kdebug("[Remote Method : sendMessage() Call]  : [param] : "+h+" : "+g);var j=f.getTransport();if(g===undefined){g=this.getMessage(h)}var i={RESULT_CODE:h,RESULT_MSG:g};j.setKakaopayFormParam(i)};e.closeDlp=function(h,g){this.kdebug("[Remote Method : closeDlp() Call]  : [param] : "+h+" : "+g);var i=f.getTransport();if(g===undefined){this.sendMessage(h,this.getMessage(h))}else{this.sendMessage(h,g)}i.closeDlp()};e.validateTelnumAlert=function(i){this.kdebug("[Remote Method : validateTelnumAlert() Call]  : [param] : ");var h=f.layerHtmlInfo.validateTelnumAlert();var g=$(h);f.setLayerCenterPosition(g,"validateTelnumAlert","telnumAlertLayer");$("#alertOkBtn",g).on("click",function(){g.remove();if($.isFunction(i)){i(true)}});$("body").append(g);$("#telnumAlert").removeClass("hidden");$("#telnumAlertLayer").focus()};e.validateBirthAlert=function(i){this.kdebug("[Remote Method : validateBirthAlert() Call]  : [param] : ");var h=f.layerHtmlInfo.validateBirthAlert();var g=$(h);f.setLayerCenterPosition(g,"validateBirthAlert","birthAlertLayer");$("#alertOkBtn",g).on("click",function(){g.remove();if($.isFunction(i)){i(true)}});$("body").append(g);$("#birthAlert").removeClass("hidden");$("#birthAlertLayer").focus()};e.closeDlpConfirm=function(j,i,k){this.kdebug("[Remote Method : closeDlpConfirm() Call]  : [param] : "+j+" : "+i);var h=f.layerHtmlInfo.closeDlpConfirm();var g=$(h);f.setLayerCenterPosition(g,"closeDlpConfirm","closeConfirmLayer");$("#confirmOkBtn",g).on("click",function(){e.closeDlp(j,i);if(k && $.isFunction(k)){k(true)}});$("#confirmCancelBtn",g).on("click",function(){g.remove();if($.isFunction(k)){k(false)}});$("body").append(g);$("#closeConfirm").removeClass("hidden");$("#closeConfirmLayer").focus()};e.informHelpAlert=function(i){var h=f.layerHtmlInfo.informHelpAlert();var g=$(h);f.setLayerCenterPosition(g,"informHelpAlert","helpAlertLayer");$("#alertOkBtn",g).on("click",function(){g.remove();if($.isFunction(i)){i(true)}});$("body").append(g);$("#helpAlert").removeClass("hidden");$("#helpAlertLayer").focus()};e.initDlpCommon=function(g){this.kdebug("[Remote Method : initDlpCommon() Call]  : [param] : "+JSON.stringify(g));$("#tid").val(g.tid); $("#hashKey").val(g.hashKey);if(!g.closeBtn){$("#closeBtn").hide()}};e.sendToMerchantForSuccess=function(g,i){this.kdebug("[Remote Method : sendToMerchantForSuccess() Call]  : [param] : "+g+" : "+JSON.stringify(i));var j=f.getTransport();var h={formName:g,tid: i.tid, pg_token: i.pg_token, RESULT_CODE: i.RESULT_CODE,RESULT_MSG: i.RESULT_MSG};if(i.BIN_NUMBER!==undefined){h.BIN_NUMBER=i.BIN_NUMBER}j.setKakaopayFormParam(h);j.closeDlp()};e.alertAjaxCommonErr=function(h,i,g){this.kdebug("[Remote Method : alertAjaxCommonErr() Call]  : [param] : "+JSON.stringify(h)+" : "+i+" : "+g);if(h.status==0){alert(this.getMessage("KKP_SER_005"))}else{alert(this.getMessage("KKP_SER_006"))}};e.getMaxTime=function(h,g){this.kdebug("[Remote Method : sendToMerchantForSuccess() Call]  : [param] : "+formName+" : "+JSON.stringify(data));if(g!==undefined){return e.MAX_TIME[h]}else{return e.MAX_TIME[h][g]}};return e};if(typeof c.kakaopayDlpServer==="undefined"){c.kakaopayDlpServer=new b()}var d=function(){var e={};var f=c.kakaopayDlpServer;e={validateLeapYear:function(l){if(l.length!==6){return true}var j=l[0]+l[1];var k=l[2]+l[3];var h=l[4]+l[5];var g=new Array();g=[29,31,28,31,30,31,30,31,31,30,31,30,31];var i="";if(k<1||k>12){return true}if((j%4)===0&&k==="02"){i=g[0]}else{i=g[parseInt(k,10)]}if(h<1||h>i){return true}return false},replaceAll:function(i,h,g){return i.split(h).join(g)}};return e};if(typeof c.kutil==="undefined"){c.kutil=new d()}})(window);