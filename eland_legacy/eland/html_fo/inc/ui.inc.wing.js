var wingIncStr = '';
wingIncStr+='			<div class="wing_menu">'
wingIncStr+='				<div class="wm_left">'
wingIncStr+='					<div class="wm_adds">'
wingIncStr+='						<a href="#"><img src="../../images/pcweb/temp/_temp_wm_l01.gif" alt="" /></a>'
wingIncStr+='					</div>'
wingIncStr+='					<div class="wm_adds" id="wingleftBanner">'
wingIncStr+='						<div class="swiper-container">'
wingIncStr+='							<ul class="swiper-wrapper">'
wingIncStr+='								<li class="swiper-slide"><a href="#"><img src="../../images/pcweb/temp/_temp_wm_l02.jpg" alt="BAHUS CHAIR"></a></li>'
wingIncStr+='								<li class="swiper-slide"><a href="#"><img src="../../images/pcweb/temp/_temp_wm_l02.jpg" alt="BAHUS CHAIR"></a></li>'
wingIncStr+='								<li class="swiper-slide"><a href="#"><img src="../../images/pcweb/temp/_temp_wm_l02.jpg" alt="BAHUS CHAIR"></a></li>'
wingIncStr+='							</ul>'
wingIncStr+='						</div>'
wingIncStr+='						<div class="wl_btns">'
wingIncStr+='							<button class="wl_prev d_prev" type="button">이전</button>'
wingIncStr+='							<button class="wl_next d_next" type="button">다음</button>'
wingIncStr+='							<div class="wl_cnt">'
wingIncStr+='								<span class="wlc_idx">1</span>/<span class="wlc_length">1</span>'
wingIncStr+='							</div>'
wingIncStr+='						</div>'
wingIncStr+='					</div>'
wingIncStr+='				</div>'
wingIncStr+=''
wingIncStr+='				<div class="wm_right">'
wingIncStr+='					<!-- 상담 off 케이스 -->'
wingIncStr+='					<!-- <div class="wm_chat"><a href="#"><i><img src="../../images/pcweb/common/chatbot_off.gif" /></i><span>톡톡챗</span></a></div> -->'
wingIncStr+='					<!-- 상담 on 케이스 -->'
wingIncStr+='					<div class="wm_chat"><a href="#"><i><img src="../../images/pcweb/common/chatbot_on.gif" /></i><span>톡톡챗</span></a></div>'
wingIncStr+='					<ul class="wm_list">'
wingIncStr+='						<!-- 리뉴얼 삭제 <li><a href="#" class="wm_r01">찜리스트<br/>(3)</a></li> -->'
wingIncStr+='						<li><a href="#" class="wm_r03">장바구니 <em>99</em></a></li> <!-- 리뉴얼 추가 -->'
wingIncStr+='						<li><a href="#" class="wm_r02">최근본상품</a></li>'
wingIncStr+='					</ul>'
wingIncStr+='					<div class="wm_goods_wrap" tabindex="0">'
wingIncStr+='						<div class="wm_goods" id="wmGoods">'
wingIncStr+='							<ul class="d_wg_slider">'
wingIncStr+='								<li>'
wingIncStr+='									<a href="#" class="wm_gd_links" data-index="0">'
wingIncStr+='										<img src="../../images/pcweb/temp/_temp_64x64.gif" alt="" />'
wingIncStr+='										<span class="wm_gd_info"><strong>11111(2015년신상) 캐시 아크릴 라운드 풀오버11111(2015년신상) 캐시 아크릴 라운드 풀오버</strong>34,132,000원</span>'
wingIncStr+='									</a>'
wingIncStr+='									<a href="#delete" class="wm_btn_del">상품 삭제</a>'
wingIncStr+='								</li>'
wingIncStr+='								<li>'
wingIncStr+='									<a href="#" class="wm_gd_links" data-index="1">'
wingIncStr+='										<img src="../../images/pcweb/temp/_temp_64x64.gif" alt="" />'
wingIncStr+='										<span class="wm_gd_info"><strong>22222(2015년신상)</strong>34,132,000원</span>'
wingIncStr+='									</a>'
wingIncStr+='									<a href="#delete" class="wm_btn_del">상품 삭제</a>'
wingIncStr+='								</li>'
wingIncStr+='								<li>'
wingIncStr+='									<a href="#" class="wm_gd_links" data-index="2">'
wingIncStr+='										<img src="../../images/pcweb/temp/_temp_64x64.gif" alt="" />'
wingIncStr+='										<span class="wm_gd_info"><strong>33333(2015년신상)</strong>34,132,000원</span>'
wingIncStr+='									</a>'
wingIncStr+='									<a href="#delete" class="wm_btn_del">상품 삭제</a>'
wingIncStr+='								</li>'
wingIncStr+='								<li>'
wingIncStr+='									<a href="#" class="wm_gd_links" data-index="3">'
wingIncStr+='										<img src="../../images/pcweb/temp/_sample_120x120.jpg" alt="" />'
wingIncStr+='										<span class="wm_gd_info"><strong>44444(2015년신상)</strong>34,132,000원</span>'
wingIncStr+='									</a>'
wingIncStr+='									<a href="#delete" class="wm_btn_del">상품 삭제</a>'
wingIncStr+='								</li>'
wingIncStr+='								<li>'
wingIncStr+='									<a href="#" class="wm_gd_links" data-index="4">'
wingIncStr+='										<img src="../../images/pcweb/temp/_sample_120x120.jpg" alt="" />'
wingIncStr+='										<span class="wm_gd_info"><strong>55555(2015년신상)</strong>34,132,000원</span>'
wingIncStr+='									</a>'
wingIncStr+='									<a href="#delete" class="wm_btn_del">상품 삭제</a>'
wingIncStr+='								</li>'
wingIncStr+='							</ul>'
wingIncStr+='							<div class="nodata">최근<br />본 상품이<br />없습니다.</div>'
wingIncStr+='						</div>'
wingIncStr+='						<!-- <div class="wm_btns">'
wingIncStr+='							<a href="#" class="wm_bt_next d_wm_next" tabindex="-1">이전목록</a>'
wingIncStr+='							<a href="#" class="wm_bt_prev d_wm_prev" tabindex="-1">다음목록</a>'
wingIncStr+='						</div> -->'
wingIncStr+='					</div>'
// wingIncStr+='					<div class="dir_com">'
// wingIncStr+='						<!-- 2017.12.21 앱방문으로 변경 -->'
// wingIncStr+='						<a href="#" class="d_off"><em>APP</em> 방문</a>'
// wingIncStr+='						<!-- <a href="#" class="d_on"><em>APP</em> 방문</a> -->'
// wingIncStr+='					</div>'
wingIncStr+='					<span class="wm_top"><a href="#">TOP</a></span>'
wingIncStr+='					<!-- 광고배너 -->'
wingIncStr+='					<div class="btm_fixed_adds zoom"> <!-- [V2 ] : 확대 배너  - .zoom  <script> 추가 -->'
wingIncStr+='						<a href="#link:" class="open_bn"><img src="../../images/pcweb/temp/_temp_wm_small.png" alt="summer break" /></a>'
wingIncStr+='						<div class="big_zoom">'
wingIncStr+='							<a href="#link">'
wingIncStr+='								<img src="../../images/pcweb/temp/_temp_wm_big.png" alt="한달 내내 혜택열음 - 7월 쇼핑열음" />'
wingIncStr+='							</a>'
wingIncStr+='							<button class="close"><span class="ir">닫기</span></button>'
wingIncStr+='						</div>'
wingIncStr+='					</div>'
wingIncStr+='					<!-- //광고배너 -->'
wingIncStr+='				</div>'
wingIncStr+='			</div>'

$('#container').append(wingIncStr);


function wl_bn(){
	var wl_banner_ins = new Swiper('#wingleftBanner .swiper-container',{
		speed: 300
		,autoplay: 3000
		,simulateTouch : false
		,createPagination: false
		,paginationClickable : false
		,loop : true
		,onSlideChangeEnd : function() {
			$('.wl_cnt').find('.wlc_idx').text(wl_banner_ins.activeLoopIndex+1);
		}
	});
	var $target = $('#wingleftBanner');
	var wl_swiperEle = { $target : $target , status : true , last_idx : 0 , ins : wl_banner_ins , $prevBtn : $target.find(".d_prev") , $nextBtn :  $target.find(".d_next") };
	wl_swiperEle.$target.hover(
		function (e) { //mouseenter
			wl_swiperEle.ins.stopAutoplay();
			e.preventDefault();
		},
		function (e) { //mouseleave
			if ( wl_swiperEle.status ) wl_swiperEle.ins.startAutoplay();
			e.preventDefault();
		}
		);
	wl_swiperEle.$prevBtn.on('click',function(e){
		wl_swiperEle.ins.swipePrev();
	})

	wl_swiperEle.$nextBtn.on('click',function(e){
		wl_swiperEle.ins.swipeNext();
	})
}
$(window).ready(function(){
	wl_bn();
	var total = $('#wingleftBanner').find('.swiper-slide:not(.swiper-slide-duplicate)').length;
	$('.wl_cnt').find('.wlc_length').text(total);
});

function wbGoods(){
	var $target = $(".wm_goods_wrap");
	if ( commonUI.isTarget( $target ) ) return ;

	var $wrapper, $links, $btns, $lastOnItems, $itemWrap ,$tabItems;
	var _lastIDX = 0;
	var _IDX = 0;
	var _pageIDX = 0;
	function wbInit(){
		$wrapper = $target.find(".wm_goods");
		$liItems = $target.find("li");
		$links = $target.find(".wm_gd_links");
		$itemWrap = $target.find(".d_wg_slider");
		$btns = {
			prev : $target.find(".d_wm_prev")
			,next :  $target.find(".d_wm_next")
			,del :  $target.find(".wm_btn_del")
		}

		if ( setInit() ) {
			function _bodyClickFn(e){ // body click func
				if (!$wrapper.is(e.target) && $wrapper.has(e.target).length < 1){
					$wrapper.removeClass("active");
					$liItems.removeClass("on");
					commonUI.bodyClickOffFunc( "d_wbGoods" );

					e.preventDefault();
				}
			}

			commonUI.bodyClickFunc( "d_wbGoods" , _bodyClickFn );

			wbEventHanlder();
		};
	}

	function wbEventHanlder(){
		$wrapper.on("mouseenter", ".wm_gd_links" , function(e) {
			var $this = $(this);

			$(this).parent().addClass("on");
		})

		$wrapper.on("mouseleave", "li" , function(e) {
			var $this = $(this);
			//console.log(e.type)

			$wrapper.removeClass("active");
			$this.removeClass("on");
		})

		$wrapper.on("focusin mouseenter" , "li" , function(e) {
			var $this = $(this);

			_lastIDX = $wrapper.find("li.on .wm_gd_links").attr("data-index");
			_IDX = $this.index();

			wbEngine();
			commonUI.bodyClickOnFunc( "d_wbGoods" );
		})

		$btns.del.on("click" , function(e) {
			e.preventDefault();
			wbDelete();
		})

		$btns.prev.on("click" , function(e) {
			e.preventDefault();
			wbPrev();
		})

		$btns.next.on("click" , function(e) {
			e.preventDefault();
			wbNext();
		})

		$tabItems = $wrapper.find("li .wm_gd_links");

		$tabItems.on("focus" , function(e) {
			e.preventDefault();
			var _vi = Math.floor($(this).attr("data-index")/5); //리뉴얼 수정
			_pageIDX = _vi;
			wbAni();
		})
	}

	function _tabEvent(){
		var _$tabItems  = $wrapper.find("li:not(.off)");

		_$tabItems.each(function(idx){
			$(this).find(".wm_gd_links").attr("data-index",idx);
		})
	}

	function wbDelete(){
		var $this = $liItems.eq(_IDX);
		$(".wm_goods_wrap").focus();
		$this.addClass("off");
		setInit();
		wbDeleteChk();
		_tabEvent();
	}

	function wbDeleteChk(){
		var chksItemLength = $wrapper.find("li:visible").length;
		if ( (_pageIDX*3) >= chksItemLength ){
			wbPrev();
		}
	}

	function setInit(){
		var chksItemLength = $wrapper.find("li:visible").length;

		if ( chksItemLength < 1  ) {
			$wrapper.removeClass("active").off("mouseenter");
			$itemWrap.hide();
			$(".nodata").addClass("on");
			$wrapper.height(55); //리뉴얼 수정

			return false;
		}else if ( chksItemLength < 5 ) { //리뉴얼 수정
			$wrapper.height(chksItemLength*55); //리뉴얼 수정

			$(".wm_btns").remove();
			return true;
		}

		return true;
	}

	function wbPrev(){
		var chksItemLength = parseInt($wrapper.find("li:visible").length/5); //리뉴얼 수정
		_pageIDX = ( _pageIDX > 0 )? _pageIDX -1: chksItemLength ;

		wbAni();
	}

	function wbNext(){
		var chksItemLength = parseInt($wrapper.find("li:visible").length/5); //리뉴얼 수정
		_pageIDX = ( _pageIDX < chksItemLength )? _pageIDX+1: 0 ;

		wbAni();
	}

	function wbAni(){
		var _css = { "top" : "-"+_pageIDX*220+"px" } //리뉴얼 수정
		$itemWrap.css(_css);
	}

	function wbEngine(){
		$wrapper.addClass("active");

		$liItems.removeClass("on");
		$liItems.eq(_IDX).addClass("on");

		$lastOnItems = $liItems.eq(_IDX);
	}

	wbInit();
}
$(window).ready(function(){
	wbGoods();
})

$('.zoom .open_bn').mousestop(function(){
	if(!$(this).hasClass('opened')){
		$(this).addClass('opened');
		$('.big_zoom').fadeOut(0).css('z-index', 10).fadeIn(300,function(){$('.big_zoom').addClass('on')});
	}
});
$('.big_zoom .close').click(function(){
$('.big_zoom').removeClass('on');
	setTimeout(function(){
		$('.big_zoom').fadeOut(1000,function(){
			$('.big_zoom').css('z-index', -10).fadeIn(0).removeClass('on');
			$('.zoom .open_bn').removeClass('opened')
		})
	},500)
})